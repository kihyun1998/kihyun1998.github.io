"use strict";(self.webpackChunkblogsaurus=self.webpackChunkblogsaurus||[]).push([[1946],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>C});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var p=n.createContext({}),c=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):o(o({},t),e)),r},s=function(e){var t=c(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),u=c(r),d=a,C=u["".concat(p,".").concat(d)]||u[d]||f[d]||l;return r?n.createElement(C,o(o({ref:t},s),{},{components:r})):n.createElement(C,o({ref:t},s))}));function C(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=r.length,o=new Array(l);o[0]=d;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i[u]="string"==typeof e?e:a,o[1]=i;for(var c=2;c<l;c++)o[c]=r[c];return n.createElement.apply(null,o)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},16537:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>f,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var n=r(87462),a=(r(67294),r(3905));const l={sidebar_position:44},o="44. [flutter] windows desktop\uc5d0\uc11c \uc778\uc99d\uc11c \uc800\uc7a5\uc18c\uc5d0 \uc778\uc99d\uc11c \ucd94\uac00",i={unversionedId:"flutter/flutter44",id:"flutter/flutter44",title:"44. [flutter] windows desktop\uc5d0\uc11c \uc778\uc99d\uc11c \uc800\uc7a5\uc18c\uc5d0 \uc778\uc99d\uc11c \ucd94\uac00",description:"---",source:"@site/docs/flutter/flutter44.md",sourceDirName:"flutter",slug:"/flutter/flutter44",permalink:"/docs/flutter/flutter44",draft:!1,tags:[],version:"current",sidebarPosition:44,frontMatter:{sidebar_position:44},sidebar:"dartSidebar",previous:{title:"43. [flutter] xml \uc0ac\uc6a9",permalink:"/docs/flutter/flutter43"},next:{title:"45. [flutter] Don't use BuildContext across async gaps",permalink:"/docs/flutter/flutter45"}},p={},c=[{value:"\uc0ac\uc804 \uc124\uc815",id:"\uc0ac\uc804-\uc124\uc815",level:2},{value:"CertOpenSystemStoreA",id:"certopensystemstorea",level:2},{value:"CertCreateCertificateContext",id:"certcreatecertificatecontext",level:2},{value:"CertAddCertificateContextToStore",id:"certaddcertificatecontexttostore",level:2},{value:"free",id:"free",level:2}],s={toc:c},u="wrapper";function f(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"44-flutter-windows-desktop\uc5d0\uc11c-\uc778\uc99d\uc11c-\uc800\uc7a5\uc18c\uc5d0-\uc778\uc99d\uc11c-\ucd94\uac00"},"44. ","[flutter]"," windows desktop\uc5d0\uc11c \uc778\uc99d\uc11c \uc800\uc7a5\uc18c\uc5d0 \uc778\uc99d\uc11c \ucd94\uac00"),(0,a.kt)("hr",null),(0,a.kt)("h2",{id:"\uc0ac\uc804-\uc124\uc815"},"\uc0ac\uc804 \uc124\uc815"),(0,a.kt)("p",null,"wincrypt.h\uc758 \ud568\uc218\ub4e4\uc744 \uc0ac\uc6a9\ud558\uba74 \ub429\ub2c8\ub2e4. "),(0,a.kt)("p",null,"\uc774\uac83\uc744 \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c 2\uacf3\uc5d0 \ucf54\ub4dc\ub97c \ucd94\uac00\ud574\uc918\uc57c \ud569\ub2c8\ub2e4."),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"windows/CMakeLists.txt\uc5d0 \uc717\ubd80\ubd84 ",(0,a.kt)("inlineCode",{parentName:"li"},"target_link_libraries"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},'...\n\ntarget_link_libraries(${PLUGIN_NAME} PRIVATE flutter flutter_wrapper_plugin Crypt32.lib)\nset(x509_cert_store_bundled_libraries\n  ""\n  PARENT_SCOPE\n)\n...\n\n')),(0,a.kt)("p",null,"\uc704\ucc98\ub7fc Crypt32.lib\ub97c \ucd94\uac00\ud574\uc918\uc57c \ud569\ub2c8\ub2e4."),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"windows/CMakeLists.txt\uc5d0 \uc544\ub7ab\ubd80\ubd84 ",(0,a.kt)("inlineCode",{parentName:"li"},"target_link_libraries"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"# === Tests ===\n...\ntarget_link_libraries(${TEST_RUNNER} PRIVATE flutter_wrapper_plugin Crypt32.lib)\ntarget_link_libraries(${TEST_RUNNER} PRIVATE gtest_main gmock)\n...\n\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},"#include <wincrypt.h>\n#include <vector>\n\nusing flutter::EncodableMap;\nusing flutter::EncodableValue;\n")),(0,a.kt)("p",null,"\ud544\uc694\ud55c \uac83\ub4e4 \ucd94\uac00\ud574\uc90d\ub2c8\ub2e4."),(0,a.kt)("h2",{id:"certopensystemstorea"},"CertOpenSystemStoreA"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'HCERTSTORE hStore = CertOpenSystemStoreA(NULL, storeNameData.c_str());\n\nif (!hStore) {\n  DWORD dwError = GetLastError();\n  std::stringstream ss;\n  ss << dwError;\n  result->Error("CERT_OPEN_FAILED", ss.str());\n}\n')),(0,a.kt)("p",null,"CertOpenSystemStoreA\ub294 \uc2dc\uc2a4\ud15c\uc758 Cert \uc800\uc7a5\uc18c\ub97c \uc5ec\ub294 \uc5ed\ud560\uc744 \ud55c\ub2e4."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"LPCSTR"),"\ud0c0\uc785\uc73c\ub85c \ub41c \uc800\uc7a5\uc18c \uc774\ub984 \uac12\uc744 \ubc1b\uae30 \ub54c\ubb38\uc5d0 String\uc73c\ub85c \ubc1b\uc544\uc628 \uac12\uc5d0 ",(0,a.kt)("inlineCode",{parentName:"p"},"c_str()"),"\uc744 \ud574\uc918\uc57c \ud55c\ub2e4."),(0,a.kt)("h2",{id:"certcreatecertificatecontext"},"CertCreateCertificateContext"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},'PCCERT_CONTEXT pCertContext = CertCreateCertificateContext(\n    X509_ASN_ENCODING | PKCS_7_ASN_ENCODING,\n    certificateData.data(),\n    static_cast<DWORD>(certificateData.size()));\n\nif (!pCertContext) {\n    CertCloseStore(hStore, 0);\n    result->Error("CONTEXT_CREATE_FAILED","Failed to create a certificate context");\n}\n')),(0,a.kt)("p",null,"CertCreateCertificateContext\ub85c \uc778\uc99d\uc11c context\ub97c \ub9cc\ub4e0\ub2e4."),(0,a.kt)("p",null,"\uc704\ucc98\ub7fc \uc791\uc131\ud558\uba74 \ub41c\ub2e4."),(0,a.kt)("h2",{id:"certaddcertificatecontexttostore"},"CertAddCertificateContextToStore"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},"        BOOL rst = CertAddCertificateContextToStore(\n            hStore,\n            pCertContext,\n            // CERT_STORE_ADD_REPLACE_EXISTING,\n            // CERT_STORE_ADD_NEWER,\n            CERT_STORE_ADD_NEW,\n            NULL\n        );\n")),(0,a.kt)("p",null,"\uc800\uc7a5\uc18c\uc5d0 \ucd94\uac00\ud558\ub294 \ud589\uc704\ub2e4"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"CERT_STORE_ADD_REPLACE_EXISTING"),"\ub294 \uac19\uc740 \uc778\uc99d\uc11c\uac00 \uc788\uc5b4\ub3c4 \uad50\uccb4\ud558\ub294\uac70\uace0"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"CERT_STORE_ADD_NEWER"),"\ub294 \uac19\uc740 \uc778\uc99d\uc11c\uac00 \uc788\uc744 \ub54c \uc720\ud6a8\uae30\uac04\uc774 \ub354 \uae38\uba74 \ucd94\uac00 \uc544\ub2c8\uba74 \uc5d0\ub7ec \ub0b4\ubcf4\ub0b4\uace0"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"CERT_STORE_ADD_NEW"),"\ub294 \uac19\uc740 \uc778\uc99d\uc11c\uac00 \uc5c6\uc744 \ub54c\ub9cc \ucd94\uac00 \uc788\uc73c\uba74 \uc5d0\ub7ec \ub0b4\ubcf4\ub0b8\ub2e4."),(0,a.kt)("h2",{id:"free"},"free"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cpp"},"CertFreeCertificateContext(pCertContext);\nCertCloseStore(hStore, 0);\n")),(0,a.kt)("p",null,"\uc0ac\uc6a9\uc774 \ub05d\ub09c context\uc640 store\ub294 free\uc2dc\ucf1c\uc900\ub2e4."))}f.isMDXComponent=!0}}]);