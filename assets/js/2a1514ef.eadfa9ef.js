"use strict";(self.webpackChunkblogsaurus=self.webpackChunkblogsaurus||[]).push([[6933],{3905:(e,t,n)=>{n.d(t,{Zo:()=>o,kt:()=>m});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):p(p({},t),e)),n},o=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},k=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,o=i(e,["components","mdxType","originalType","parentName"]),d=s(n),k=r,m=d["".concat(u,".").concat(k)]||d[k]||c[k]||l;return n?a.createElement(m,p(p({ref:t},o),{},{components:n})):a.createElement(m,p({ref:t},o))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,p=new Array(l);p[0]=k;var i={};for(var u in t)hasOwnProperty.call(t,u)&&(i[u]=t[u]);i.originalType=e,i[d]="string"==typeof e?e:r,p[1]=i;for(var s=2;s<l;s++)p[s]=n[s];return a.createElement.apply(null,p)}return a.createElement.apply(null,n)}k.displayName="MDXCreateElement"},24074:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>p,default:()=>c,frontMatter:()=>l,metadata:()=>i,toc:()=>s});var a=n(87462),r=(n(67294),n(3905));const l={sidebar_position:34},p="34. [flutter] package:auto_updater \uc0ac\uc6a9\ud558\uae30",i={unversionedId:"flutter/flutter34",id:"flutter/flutter34",title:"34. [flutter] package:auto_updater \uc0ac\uc6a9\ud558\uae30",description:"---",source:"@site/docs/flutter/flutter34.md",sourceDirName:"flutter",slug:"/flutter/flutter34",permalink:"/docs/flutter/flutter34",draft:!1,tags:[],version:"current",sidebarPosition:34,frontMatter:{sidebar_position:34},sidebar:"dartSidebar",previous:{title:"33. [flutter] Icon \ubcc0\uacbd",permalink:"/docs/flutter/flutter33"},next:{title:"01. [KOSTA] \ud50c\ub7ec\ud130 \uad50\uc721 - 1\ud68c\ucc28",permalink:"/docs/flutter-kosta/kosta1"}},u={},s=[{value:"\uc2dc\uc791\ud558\uae30",id:"\uc2dc\uc791\ud558\uae30",level:2},{value:"Windows",id:"windows",level:2},{value:"\uc0ac\uc804 \uc791\uc5c5",id:"\uc0ac\uc804-\uc791\uc5c5",level:3},{value:"\ud0a4 \ubc1c\uae09",id:"\ud0a4-\ubc1c\uae09",level:3},{value:"dart \ucf54\ub4dc \ucd94\uac00",id:"dart-\ucf54\ub4dc-\ucd94\uac00",level:3},{value:"distribute_options.yaml",id:"distribute_optionsyaml",level:3},{value:"flutter_distributor",id:"flutter_distributor",level:3},{value:"sign_update",id:"sign_update",level:3},{value:"\uc11c\ubc84 \ucabd",id:"\uc11c\ubc84-\ucabd",level:3},{value:"\uc5c5\ub370\uc774\ud2b8 \ud558\ub294 \ubc95 \uc694\uc57d",id:"\uc5c5\ub370\uc774\ud2b8-\ud558\ub294-\ubc95-\uc694\uc57d",level:3}],o={toc:s},d="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},o,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"34-flutter-packageauto_updater-\uc0ac\uc6a9\ud558\uae30"},"34. ","[flutter]"," package:auto_updater \uc0ac\uc6a9\ud558\uae30"),(0,r.kt)("hr",null),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://pub.dev/packages/auto_updater"},"auto_updater URL"),"\uc5d0 \ub4e4\uc5b4\uac00\ubcf4\uba74 \ud574\ub2f9 \uc815\ubcf4\ub97c \ud655\uc778\ud560 \uc218 \uc788\ub2e4.."),(0,r.kt)("h2",{id:"\uc2dc\uc791\ud558\uae30"},"\uc2dc\uc791\ud558\uae30"),(0,r.kt)("hr",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"dependencies:\n  auto_updater: ^0.1.7\n")),(0,r.kt)("p",null,"\uc2dc\uc791\ud55c\ub2e4."),(0,r.kt)("h2",{id:"windows"},"Windows"),(0,r.kt)("hr",null),(0,r.kt)("h3",{id:"\uc0ac\uc804-\uc791\uc5c5"},"\uc0ac\uc804 \uc791\uc5c5"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"choco install openssl\n")),(0,r.kt)("p",null,"windows\ub294 openssl\uc744 \uc124\uce58\ud574\uc57c\ud55c\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Program Files\\OpenSSL-Win64\\bin")," \uc774\ub7f0\uac70 \uac19\uc740 openssl \uacbd\ub85c\ub97c \uc2dc\uc2a4\ud15c \ud658\uacbd \ubcc0\uc218\ub85c \ucd94\uac00\ud55c\ub2e4."),(0,r.kt)("h3",{id:"\ud0a4-\ubc1c\uae09"},"\ud0a4 \ubc1c\uae09"),(0,r.kt)("hr",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dart run auto_updater:generate_keys\n")),(0,r.kt)("p",null,"\uba85\ub839\uc5b4\ub97c \uc785\ub825\ud558\uba74 "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"Generated two files:\ndsa_priv.pem: your private key. Keep it secret and don't share it!\ndsa_pub.pem: public counterpart to include in youe app.\nBACK UP YOUR PRIVATE KEY AND KEEP IT SAFE!\nIf you lose it, your users will be unable to upgrade!\n")),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ub098\uc62c \uac83\uc785\ub2c8\ub2e4. dsa_prive.pem\uacfc dsa_pub.pem\uc774 \uc0dd\uacbc\ub2e4\ub294 \ub73b\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub7fc ",(0,r.kt)("inlineCode",{parentName:"p"},"windows/runner/Runner.rc")," \ub9e8 \uc544\ub798\uc5d0"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'...\n\n+/////////////////////////////////////////////////////////////////////////////\n+//\n+// WinSparkle\n+//\n\n+// And verify signature using DSA public key:\n+DSAPub      DSAPEM      "../../dsa_pub.pem"\n')),(0,r.kt)("p",null,"\uc774 \ub0b4\uc6a9\uc744 \ucd94\uac00\ud574\uc8fc\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"dart-\ucf54\ub4dc-\ucd94\uac00"},"dart \ucf54\ub4dc \ucd94\uac00"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-dart"},"import 'package:auto_updater/auto_updater.dart';\n\nvoid main() async {\n  // Must add this line.\n  WidgetsFlutterBinding.ensureInitialized();\n\n  String feedURL = 'http://localhost:8080/appcast.xml';\n  await autoUpdater.setFeedURL(feedURL);\n  await autoUpdater.checkForUpdates();\n  await autoUpdater.setScheduledCheckInterval(3600);\n\n  runApp(MyApp());\n}\n")),(0,r.kt)("p",null,"dart\uc5d0\uc11c \uc0ac\uc6a9\ud558\uae30 \uc704\ud574\uc11c \uc774\ub807\uac8c \ucd94\uac00\ud560 \uc218 \uc788\ub294\ub370 setFeedURL\uc744 \ud1b5\ud574\uc11c \uc11c\ubc84\uc5d0 \uc788\ub294 ",(0,r.kt)("inlineCode",{parentName:"p"},"appcast.xml")," \ud30c\uc77c\uc744 \ud655\uc778\ud558\uae30 \uc704\ud55c url\uc744 \uc124\uc815\ud560 \uc218 \uc788\uace0"),(0,r.kt)("p",null,"update\uac00 \ud544\uc694\ud55c\uc9c0 ",(0,r.kt)("inlineCode",{parentName:"p"},"checkForUpdates()"),"\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\uace0"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"setScheduledCheckInterval()")," \uc774\uac83\uc774 \uc788\ub294\ub370 \uc8fc\uae30\uc801\uc73c\ub85c \uc5c5\ub370\uc774\ud2b8 \ud655\uc778\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"distribute_optionsyaml"},"distribute_options.yaml"),(0,r.kt)("p",null,"distribute_options.yaml\ub97c \uc791\uc131\ud574\uc57c\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},"output: dist/\nreleases:\n  - name: dev\n    jobs:\n      - name: release-windows\n        package:\n          platform: windows\n          target: exe\n          build_args:\n            dart-define:\n              APP_ENV: dev\n")),(0,r.kt)("p",null,"\uc608\uc2dc\ub85c \uc774\ub807\uac8c \ub9cc\ub4e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4. \ud328\ud0a4\uc9d5 \ud574\uc11c \ub098\uc628 \ud30c\uc77c\uc740 ",(0,r.kt)("inlineCode",{parentName:"p"},"dist")," \ud3f4\ub354 \ubc11\uc5d0 \ub098\uc624\ub3c4\ub85d \uba85\uc2dc\ud55c \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"flutter_distributor"},"flutter_distributor"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dart pub global activate flutter_distributor\n")),(0,r.kt)("p",null,"\uc704 \uba85\ub839\uc5b4\ub85c ",(0,r.kt)("inlineCode",{parentName:"p"},"flutter_distributor"),"\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 \uc2dc\uc2a4\ud15c \ud658\uacbd\ubcc0\uc218\ub97c \uc124\uc815\ud569\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"C:\\Users\\User\\AppData\\Local\\Pub\\Cache\\bin")," \uc81c \uacbd\uc6b0\ub294 \uc5ec\uae30\ub97c \ucd94\uac00\ud588\uc5b4\uc57c \ud588\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://distributor.leanflutter.dev/"},"flutter_distributor \ub9c1\ud06c")," \uc5d0 \ub4e4\uc5b4\uac00\ubcf4\uba74 \uc880 \ub354 \uc790\uc138\ud55c \ub0b4\uc6a9\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"flutter_distributor release --name dev --jobs release-windows\n")),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ud574\uc57c\ud558\ub294\ub370 \uc544\ub9c8 \uc5d0\ub7ec\uac00 \ub0a0 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"windows/packaging/exe/make_config.yaml")," \ud30c\uc77c\uc774 \uc788\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:'title="make_config.yaml"',title:'"make_config.yaml"'},"app_id: 15B248E0-3E58-4509-AA5D-1FC749611FE3\npublisher: My Company, Inc.\npublisher_url: https://www.example.com/\ndisplay_name: Update_test\ncreate_desktop_icon: false\ninstall_dir_name: Update_test\nlocales:\n  - kr\n")),(0,r.kt)("p",null,"\uc774\ub7f0\uc2dd\uc73c\ub85c \uc791\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ud588\ub2e4\uba74"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"flutter_distributor release --name dev --jobs release-windows\n")),(0,r.kt)("p",null,"\ub2e4\uc2dc \uc704\uc758 \uba85\ub839\uc5b4\uac00 \uc131\uacf5\ud560 \uac83\uc774\uace0 dist/\ubc11\uc5d0 exe \ud30c\uc77c\uc774 \uc0dd\uae38 \uac83\uc785\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"sign_update"},"sign_update"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"dart run auto_updater:sign_update dist/\uc544\uae4cexe\ud30c\uc77c\uba85\n")),(0,r.kt)("p",null,"\uc774\ub807\uac8c \ud574\uc8fc\uba74 exe\ud30c\uc77c\uc5d0 \ub300\ud55c \uc11c\uba85 \uac12\uc774 \uc544\ub798\ucc98\ub7fc \ub098\uc635\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-yaml"},'sparkle:dsaSignature="MEUCIQCVbVzVID7H3aUzAY5znpi+ySZKznkukV8whlMFzKh66AIgREUGOmvavlcg6hwAwkb2o4IqVE/D56ipIBshIqCH8rk=" length="13400992"\n')),(0,r.kt)("h3",{id:"\uc11c\ubc84-\ucabd"},"\uc11c\ubc84 \ucabd"),(0,r.kt)("hr",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},'from fastapi import FastAPI\nfrom fastapi.staticfiles import StaticFiles\n\napp = FastAPI()\n\napp.mount("/dist",StaticFiles(directory="dist"),name="dist")\n')),(0,r.kt)("p",null,"fast api\ub85c \ub2e8\uc21c\ud558\uac8c \ub9cc\ub4e4\uc5c8\uc2b5\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml",metastring:'title="appcast.xml"',title:'"appcast.xml"'},'<?xml version="1.0" encoding="UTF-8"?>\n<rss version="2.0" xmlns:sparkle="http://www.andymatuschak.org/xml-namespaces/sparkle">\n    <channel>\n        <title>\uc571 \uc5c5\ub370\uc774\ud2b8</title>\n        <link>\uc571 \ud648\ud398\uc774\uc9c0 URL</link>\n        <description>\uc571 \uc5c5\ub370\uc774\ud2b8 \uc815\ubcf4</description>\n        <language>ko</language>\n        <item>\n            <title>1.0.0</title>\n            <description>\uc774\ubc88 \uc5c5\ub370\uc774\ud2b8\uc758 \ubcc0\uacbd \uc0ac\ud56d</description>\n            <pubDate>Wed, 13 Mar 2024 12:01:00 +0800</pubDate>\n            <enclosure url="http://127.0.0.1:8000/dist/1.0.1/update_app-1.0.1+1.0.1-windows-setup.exe"\n                       sparkle:dsaSignature="MEUCIQCVbV\ud574\uc2dc\uac12"\n                       sparkle:version="1.0.1"\n                       sparkle:os="windows"\n                       length="0"\n                       type="application/octet-stream" />\n        </item>\n        \x3c!-- \ucd94\uac00 \uc5c5\ub370\uc774\ud2b8 \ud56d\ubaa9\uc744 \uc704\ud574 \ub354 \ub9ce\uc740 <item> \uc694\uc18c\ub97c \ucd94\uac00\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4 --\x3e\n    </channel>\n</rss>\n')),(0,r.kt)("p",null,"appcast.xml\uc744 \uc0ac\uc6a9\ud558\uc5ec \uc5c5\ub370\uc774\ud2b8 \ubc84\uc804\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"sparkle:dsaSignature"),"\uc5d0 \ud574\uc2dc \uac12\uc744 \ub123\uc73c\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,r.kt)("inlineCode",{parentName:"p"},"url"),"\uacbd\ub85c\uc5d0 exe \ud30c\uc77c\uc744 \ub123\uc73c\uba74 \ub429\ub2c8\ub2e4."),(0,r.kt)("h3",{id:"\uc5c5\ub370\uc774\ud2b8-\ud558\ub294-\ubc95-\uc694\uc57d"},"\uc5c5\ub370\uc774\ud2b8 \ud558\ub294 \ubc95 \uc694\uc57d"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc0ac\uc804 \uc124\uc815 \ud558\uae30")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"flutter_distributor release --name dev --jobs release-windows")," \ud574\uc11c building \ud558\uae30")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"dart run auto_updater:sign_update dist/\uc5b4\uca4c\uad6c\uc800\uca4c\uad6c.exe")," \ud558\uae30")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"exe\ud30c\uc77c \uc11c\ubc84\ub85c \uc62e\uae30\uae30")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"\uc11c\ubc84\uc5d0\uc11c appcast.xml \uc218\uc815\ud558\uae30 ( \uc62e\uae34 exe\ud30c\uc77c\ub85c url \uc218\uc815 \ubc0f sparkle:dsaSignature \ud574\uc2dc \uac12 \ubcc0\uacbd )"))),(0,r.kt)("p",null,"\ub05d.."))}c.isMDXComponent=!0}}]);