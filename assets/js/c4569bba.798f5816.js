"use strict";(self.webpackChunkblogsaurus=self.webpackChunkblogsaurus||[]).push([[918],{3905:(e,t,r)=>{r.d(t,{Zo:()=>u,kt:()=>k});var n=r(67294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var i=n.createContext({}),s=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):p(p({},t),e)),r},u=function(e){var t=s(e.components);return n.createElement(i.Provider,{value:t},e.children)},c="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),c=s(r),m=o,k=c["".concat(i,".").concat(m)]||c[m]||g[m]||a;return r?n.createElement(k,p(p({ref:t},u),{},{components:r})):n.createElement(k,p({ref:t},u))}));function k(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,p=new Array(a);p[0]=m;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[c]="string"==typeof e?e:o,p[1]=l;for(var s=2;s<a;s++)p[s]=r[s];return n.createElement.apply(null,p)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},62197:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>p,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var n=r(87462),o=(r(67294),r(3905));const a={sidebar_position:4},p="[gRPC] 5. \ub2e4\uc2dc gRPC\uc5d0 \ub300\ud558\uc5ec",l={unversionedId:"gRPC/grpc5",id:"gRPC/grpc5",title:"[gRPC] 5. \ub2e4\uc2dc gRPC\uc5d0 \ub300\ud558\uc5ec",description:"\uc791\ub3d9 \ubc29\uc2dd",source:"@site/docs/gRPC/grpc5.md",sourceDirName:"gRPC",slug:"/gRPC/grpc5",permalink:"/docs/gRPC/grpc5",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"backSidebar",previous:{title:"[gRPC] 4. gRPC - Serialize protobuf message",permalink:"/docs/gRPC/grpc4"},next:{title:"[GitHub Actions] self-host runner \uc0ac\uc6a9\ud558\uae30 in Ubuntu",permalink:"/docs/dev-ops/dev-ops1"}},i={},s=[{value:"\uc791\ub3d9 \ubc29\uc2dd",id:"\uc791\ub3d9-\ubc29\uc2dd",level:2},{value:"HTTP Json\ubcf4\ub2e4 \uc88b\uc740\uc810",id:"http-json\ubcf4\ub2e4-\uc88b\uc740\uc810",level:2},{value:"gRPC gateway",id:"grpc-gateway",level:2},{value:"proto \ud30c\uc77c \uc791\uc131",id:"proto-\ud30c\uc77c-\uc791\uc131",level:2},{value:"go \uc5b8\uc5b4\ub85c \uc0dd\uc131",id:"go-\uc5b8\uc5b4\ub85c-\uc0dd\uc131",level:2}],u={toc:s},c="wrapper";function g(e){let{components:t,...a}=e;return(0,o.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"grpc-5-\ub2e4\uc2dc-grpc\uc5d0-\ub300\ud558\uc5ec"},"[gRPC]"," 5. \ub2e4\uc2dc gRPC\uc5d0 \ub300\ud558\uc5ec"),(0,o.kt)("h2",{id:"\uc791\ub3d9-\ubc29\uc2dd"},"\uc791\ub3d9 \ubc29\uc2dd"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"API \ub370\uc774\ud130\uc640 \uad6c\uc870 \uc815\uc758",(0,o.kt)("br",{parentName:"li"}),"proto buffer\ub97c \uc0ac\uc6a9\ud574\uc11c \uc815\uc758")),(0,o.kt)("ol",{start:2},(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"gRPC stub \uc0dd\uc131",(0,o.kt)("br",{parentName:"p"}),"\n","protoc\ub97c \uc0ac\uc6a9\ud574\uc11c gRPC \ucf54\ub4dc \uc0dd\uc131")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\uc11c\ubc84 \uad6c\ud604")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\ud074\ub77c\uc774\uc5b8\ud2b8 \uc0ac\uc6a9"))),(0,o.kt)("h2",{id:"http-json\ubcf4\ub2e4-\uc88b\uc740\uc810"},"HTTP Json\ubcf4\ub2e4 \uc88b\uc740\uc810"),(0,o.kt)("hr",null),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\ube60\ub974\ub2e4. HTTP2 \uc804\uc1a1\uc774\uace0 \ubc14\uc774\ub108\ub9ac \ud615\uc2dd\uc73c\ub85c \uc804\uc1a1\ud558\uae30 \ub54c\ubb38\uc5d0, \ud5e4\ub354 \uc555\ucd95\ub3c4 \ud568.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"api contract\uac00 \uac15\ud568")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"\ucf54\ub4dc \uc790\ub3d9 \uc0dd\uc131"))),(0,o.kt)("h2",{id:"grpc-gateway"},"gRPC gateway"),(0,o.kt)("hr",null),(0,o.kt)("p",null,"\uc11c\ubc84 \ucf54\ub4dc\ub97c \ud55c\ubc88 \uc791\uc131\ud558\uace0 gRPC\uc640 HTTP JSON \ub3d9\uc2dc\uc5d0 \ucc98\ub9ac\ud560 \uc218 \uc788\ub294 \ubaa8\ub378"),(0,o.kt)("p",null,"proto buffer plugin\uc774\ub77c\uace0 \ud569\ub2c8\ub2e4."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Alt text",src:r(88277).Z,width:"940",height:"1314"})),(0,o.kt)("p",null,"gRPC client\ub294 gRPC\uc640 \uc5f0\uacb0\ub418\uc5b4 \ubc14\uc774\ub108\ub9ac \uc751\ub2f5\ubc1b\uace0 HTTP Client\ub294 Gateway\uc640 \uc5f0\uacb0\ub418\uc5b4 JSON \uc751\ub2f5\uc744 \ubc1b\uc2b5\ub2c8\ub2e4."),(0,o.kt)("p",null,"unary\uc5d0\uc11c\ub9cc \uc791\ub3d9\ud55c\ub2e4. streaming \ubc29\uc2dd\uc73c\ub85c \uc0ac\uc6a9\ud558\ub824\uba74 gateway\ub97c \ud504\ub85d\uc2dc \uc11c\ubc84\ub85c \uc62c\ub824\uc57c\ud55c\ub2e4."),(0,o.kt)("h2",{id:"proto-\ud30c\uc77c-\uc791\uc131"},"proto \ud30c\uc77c \uc791\uc131"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},'syntax="proto3";\n\noption go_package="simplebank/pb";\nimport "google/protobuf/timestamp.proto";\n\nmessage User{\n    string username=1;\n    string full_name=2;\n    string email=3;\n    google.protobuf.Timestamp password_changed_at=4;\n    google.protobuf.Timestamp created_at=5;\n}\n')),(0,o.kt)("p",null,"\uc774\ub7f0\uc2dd\uc73c\ub85c \uc791\uc131\ud558\ub294\ub370 ",(0,o.kt)("inlineCode",{parentName:"p"},"message User"),"\uc5d0\uc11c \uc22b\uc790\ub294 1~15\uae4c\uc9c0\ub294 1byte 16\uc774\uc0c1\ubd80\ud130\ub294 2byte\uac00 \uc0ac\uc6a9\ub41c\ub2e4."),(0,o.kt)("p",null,"user.proto\ub294 user\uc5d0 \ub300\ud55c \uad6c\uc870\ub97c \uc815\uc758\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,o.kt)("p",null,"\ucd94\uac00\ub85c ",(0,o.kt)("inlineCode",{parentName:"p"},"CreateUserRequest"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"CreateUserResponse"),"\ub97c \ub9cc\ub4e4 \uc218 \uc788\ub294\ub370 \uc774\ub3c4 API \uc694\uccad\uacfc \uc751\ub2f5 \ub370\uc774\ud130 \uad6c\uc870\ub97c \uc815\uc758\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,o.kt)("p",null,"\uc2e4\uc81c\uc801\uc778 \uc11c\ube44\uc2a4 \ucf54\ub4dc\ub294 \ub2e4\ub978 \ud30c\uc77c\uc5d0 \uc791\uc131\ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-protobuf"},"service Simplebank{\n    rpc CreateUser (CreateUserRequest) returns (CreateUserResponse){}\n    rpc LoginUser (LoginUserRequest) returns (LoginUserResponse){}\n} \n")),(0,o.kt)("p",null,"\uc11c\ube44\uc2a4\ub294 \uc704\uc640 \uac19\uc774 \uc815\uc758\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("h2",{id:"go-\uc5b8\uc5b4\ub85c-\uc0dd\uc131"},"go \uc5b8\uc5b4\ub85c \uc0dd\uc131"),(0,o.kt)("p",null,"protoc\ub97c \uc0ac\uc6a9\ud574\uc11c go\uc5b8\uc5b4\ub85c \ubcc0\ud658\ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"protoc --proto_path=proto --go_out=pb --go_opt=paths=source_relative --go-grpc_out=pb --go-grpc_opt=paths=source_relative proto/*.proto\n")),(0,o.kt)("p",null,"\uacf5\uc2dd \ubb38\uc11c\uc5d0 \ub098\uc624\uba74 \ub098\uc624\uae34 \ud558\ub294\ub370\uc694 \uc790\uc138\ud788 \uc124\uba85\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--proto_path"),"\ub294 proto \uacbd\ub85c\uc5d0 \ub300\ud55c \uc815\uc758\uc785\ub2c8\ub2e4."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--go_out"),"\uc640 ",(0,o.kt)("inlineCode",{parentName:"p"},"--go-grpc_out"),"\uc740 go \ud30c\uc77c\uc774 \ub098\uc62c \uacbd\ub85c \uc785\ub2c8\ub2e4."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"--go_opt=paths=source_relative"),"\uc640 ",(0,o.kt)("inlineCode",{parentName:"p"},"--go-grpc_opt=paths=source_relative"),"\ub294 \uc0c1\ub300\uacbd\ub85c\ub97c \uc0ac\uc6a9\ud558\uaca0\ub2e4\ub294 \ub73b\uc785\ub2c8\ub2e4. \uc774 \uc124\uc815\uc744 \ud558\uc9c0 \uc54a\uc73c\uba74 \ubaa8\ub4e0 \uacbd\ub85c\ub97c \uc808\ub300\uacbd\ub85c\ub97c \uc785\ub825\ud574\uc57c \ud569\ub2c8\ub2e4."),(0,o.kt)("p",null,"\ub9c8\uc9c0\ub9c9 ",(0,o.kt)("inlineCode",{parentName:"p"},"proto/*.proto"),"\ub294 \uc5b4\ub5a4 \ud30c\uc77c\ub4e4\uc744 go\ub85c \ub9cc\ub4e4\uc9c0 \uc815\ud558\ub294 \uac83\uc785\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"del /s ./pb/*.go\n")),(0,o.kt)("p",null,"make \ud30c\uc77c\uc5d0 \ud30c\uc77c \uc0ad\uc81c \uae30\ub2a5\uae4c\uc9c0 \ub123\uc73c\uba74 \uc798 \uc791\ub3d9\ud560 \uac83\uc785\ub2c8\ub2e4."))}g.isMDXComponent=!0},88277:(e,t,r)=>{r.d(t,{Z:()=>n});const n=r.p+"assets/images/image5-d41c6f63a9537a1bbd8668949297448e.png"}}]);